Ajout du dépôt Zabbix :

wget https://repo.zabbix.com/zabbix/6.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_6.4-1+ubuntu24.04_all.deb
sudo dpkg -i zabbix-release_6.4-1+ubuntu24.04_all.deb
sudo apt update

Installation des composants :

sudo apt install zabbix-server-mysql zabbix-frontend-php zabbix-apache-conf zabbix-sql-scripts zabbix-agent mysql-server -y

Configuration de la BDD pour le Zabbix : 

sudo mysql -u root -p
# Exécuter dans MySQL :
CREATE DATABASE <NOM_BD> CHARACTER SET utf8 COLLATE utf8_bin;
CREATE USER <NOM_USER>@<IP_OU_LOCALHOST> IDENTIFIED BY <MOT_DE_PASSE>;
GRANT ALL PRIVILEGES ON <NOM_BD>* TO <NOM_USER>@<IP_OU_LOCALHOST>;
FLUSH PRIVILEGES;
EXIT;

Importation du schéma initial : 

sudo zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mysql --default-character-set=utf8mb4 -u zabbix -p Zabbix

Configuration du serveur Zabbix via le fichier : /etc/zabbix/zabbix_server.conf

DBHost=<HOST_NAME>
DBName=<DB_NAME>
DBUser=<USER>
DBPassword=<PASSWORD>

Redémarrage des services : 

sudo systemctl restart zabbix-server zabbix-agent2 apache2
sudo systemctl enable zabbix-server zabbix-agent2 apache2

Installation des agents2 sur CentOS et Rocky :

sudo rpm -Uvh https://repo.zabbix.com/zabbix/6.4/rhel/9/x86_64/zabbix-release-6.4-1.el9.noarch.rpm
sudo dnf install zabbix-agent2 -y

Configuration de l'agent via : /etc/zabbix/zabbix_agent2.conf

Server=<IP_UBUNTU_ZABBIX>
ServerActive=<IP_UBUNTU_ZABBIX>
Hostname=<NOM_UNIQUE_DE_LA_VM>

Importation manuelle du modèle depuis la communauté : 

wget https://git.zabbix.com/projects/ZBX/repos/zabbix/raw/templates/os/Linux_agent2.xml

Vérifier le statuts des agents sur les machines CentOS et Rocky :

sudo systemctl status zabbix-agent2

Si non activé : 

sudo systemctl enable --now zabbix-agent2

Configuration de l'agent via : /etc/zabbix/zabbix_agent2.conf 

Server=<IP_ZABBIX_SERVER>       # IP du serveur Zabbix
ServerActive=<IP_ZABBIX_SERVER> # IP du serveur Zabbix
Hostname=<NOM_HOTE>             # Doit correspondre au nom configuré dans Zabbix

Redémarrer l'agent : 

sudo systemctl restart zabbix-agent2

Installation SNMPv2 :

sudo dnf install net-snmp net-snmp-utils -y

Configuration SNMPv2 via : /etc/snmp/snmpd.conf

rocommunity public 10.11.29.29  # Autoriser le serveur Zabbix

Démarrer et activé le service SNMP : 

sudo systemctl start snmpd
sudo systemctl enable snmpd



